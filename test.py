# -*- coding:utf-8 -*-
import types
import HTMLParser
import re
import urlparse
import chardet
zidian = {'pubdate': u'2018-10-04', 'title': u'\u6c5f\u6e56\u513f\u5973HD1280\u9ad8\u6e05', 'url': 'https://www.piaohua.com/html/aiqing/2018/1004/41681.html', 'pic': u'/data/piaohua/1/7ec284c6f9f6ce1102237aa876621df3.jpg', 'downloadurl': u'/|magnet:?xt=urn:btih:XD7EEUG2KRYLVJNNFP2LAGXATPMPKQOI\r|ftp://h:h@a.piaohua668.com:12380/\u6c5f\u6e56\u513f\u5973HD\u9ad8\u6e05\u56fd\u8bed\u4e2d\u5b57[\u98d8\u82b1www.piaohua.com].mkv|', 'actors': '\xe6\x95\x85\xe4\xba\x8b\xe8\xb5\xb7\xe5\xa7\x8b\xe4\xba\x8e2001\xe5\xb9\xb4\xe7\x9a\x84\xe5\xb1\xb1\xe8\xa5\xbf\xe5\xa4\xa7\xe5\x90\x8c\xef\xbc\x8c\xe6\xa8\xa1\xe7\x89\xb9\xe5\xb7\xa7\xe5\xb7\xa7\xef\xbc\x88\xe8\xb5\xb5\xe6\xb6\x9b \xe9\xa5\xb0\xef\xbc\x89\xe4\xb8\x8e\xe5\x87\xba\xe7\xa7\x9f\xe8\xbd\xa6\xe5\x85\xac\xe5\x8f\xb8\xe8\x80\x81\xe6\x9d\xbf\xe6\x96\x8c\xe5\x93\xa5\xef\xbc\x88\xe5\xbb\x96\xe5\x87\xa1 \xe9\xa5\xb0\xef\xbc\x89\xe6\x98\xaf\xe4\xb8\x80\xe5\xaf\xb9\xe6\x81\x8b\xe4\xba\xba\xef\xbc\x8c\xe6\x96\x8c\xe5\x93\xa5\xe6\xaf\x8f\xe5\xa4\xa9\xe5\x9c\xa8\xe5\xa4\x96\xe9\x9d\xa2\xe5\x91\xbc\xe6\x9c\x8b\xe5\x94\xa4\xe5\x8f\x8b\xef\xbc\x8c\xe5\xb7\xa7\xe5\xb7\xa7\xe5\xb8\x8c\xe6\x9c\x9b\xe8\x83\xbd\xe5\xa4\x9f\xe5\xb0\xbd\xe5\xbf\xab\xe8\xbf\x9b\xe5\x85\xa5\xe5\xa9\x9a\xe5\xa7\xbb\xe3\x80\x82\xe4\xb8\x80\xe6\xac\xa1\xef\xbc\x8c\xe6\x96\x8c\xe5\x93\xa5\xe5\x9c\xa8\xe8\xa1\x97\xe5\xa4\xb4\xe9\x81\xad\xe5\x88\xb0\xe7\xab\x9e\xe4\xba\x89\xe5\xaf\xb9\xe6\x89\x8b\xe7\x9a\x84\xe8\xa2\xad\xe5\x87\xbb\xef\xbc\x8c\xe5\xb7\xa7\xe5\xb7\xa7\xe4\xb8\xba\xe4\xba\x86\xe4\xbf\x9d\xe6\x8a\xa4\xe6\x96\x8c\xe5\x93\xa5\xe8\xa1\x97\xe5\xa4\xb4\xe5\xbc\x80\xe6\x9e\xaa\xef\xbc\x8c\xe8\xa2\xab\xe5\x88\xa4\xe5\x88\x91\xe4\xba\x94\xe5\xb9\xb4\xe3\x80\x82\xe5\xb7\xa7\xe5\xb7\xa7\xe5\x87\xba\xe7\x8b\xb1\xe4\xbb\xa5\xe5\x90\x8e\xef\xbc\x8c\xe5\xbc\x80\xe5\xa7\x8b\xe5\xaf\xbb\xe6\x89\xbe\xe6\x96\x8c\xe5\x93\xa5\xe4\xbb\xa5\xe4\xbe\xbf\xe9\x87\x8d\xe6\x96\xb0\xe5\xbc\x80\xe5\xa7\x8b\xef\xbc\x8c\xe7\x84\xb6\xe8\x80\x8c\xe4\xba\x8b\xe6\x83\x85\xe5\x8d\xb4\xe5\x8f\x91\xe7\x94\x9f\xe4\xba\x86\xe6\x84\x8f\xe6\x83\xb3\xe4\xb8\x8d\xe5\x88\xb0\xe7\x9a\x84\xe5\x8f\x98\xe5\x8c\x96\xe3\x80\x82\xc2\xa0', 'smallpic': u'/data/piaohua/1/7ec284c6f9f6ce1102237aa876621df3201_281.jpg'}
zidian2={'pubdate': '2018-10-08', 'pic': '/data/piaohua/1/5131b68c2bfb518ec36a7dfcc94fdc17.jpg', 'idburl': 'http://movie.douban.com/subject/26930106/', 'duration': '91\xe5\x88\x86\xe9\x92\x9f', 'scriptor': '', 'smallpic': '/data/piaohua/1/5131b68c2bfb518ec36a7dfcc94fdc17201_298.jpg', 'translame': '\xe5\xae\x89\xe6\x9d\x9c\xe4\xbd\x9b / \xe4\xbb\xa5\xe4\xb8\x8a', 'title': u'\u5b89\u591a\u5f17BD1280\u9ad8\u6e05', 'brief': '\xe4\xb8\x80\xe4\xbd\x8d\xe9\x81\x97\xe4\xbc\xa0\xe5\xad\xa6\xe6\x95\x99\xe6\x8e\x88\xe4\xb8\x80\xe9\x81\x8d\xe5\x8f\x88\xe4\xb8\x80\xe9\x81\x8d\xe5\x9c\xb0\xe5\x85\x8b\xe9\x9a\x86\xe7\x9d\x80\xe4\xbb\x96\xe6\xad\xbb\xe5\x8e\xbb\xe7\x9a\x84\xe5\xa6\xbb\xe5\xad\x90\xef\xbc\x8c\xe6\x83\xb3\xe8\xae\xa9\xe5\xa5\xb9\xe5\xae\x8c\xe5\x85\xa8\xe6\x81\xa2\xe5\xa4\x8d\xe5\x8e\x9f\xe8\xb2\x8c\xe3\x80\x82', 'actor': '\xe4\xb9\x94\xe7\xba\xb3\xe6\xa3\xae\xc2\xb7\xe6\x96\xaf\xe6\xb2\x83\xe6\x9b\xbc\xc2\xa0 \xe8\xa9\xb9\xe5\xa6\xae\xe4\xbd\x9b\xc2\xb7\xe8\x8a\xac\xe5\xb0\xbc\xe7\x94\x98\xc2\xa0 \xe4\xb8\x9d\xe6\x9f\xaf\xc2\xb7\xe6\xb3\xb0\xe5\x8b\x92-\xe8\x80\x83\xe6\x99\xae\xe9\xa1\xbf\xc2\xa0 \xe6\x96\xaf\xe8\x92\x82\xe6\x96\x87\xc2\xb7\xe9\xb2\x8d\xe5\xb0\x94\xc2\xa0 \xe5\xae\x89\xe5\x90\x89\xe6\x8b\x89\xc2\xb7\xe9\x87\x91\xe8\xb5\x9b\xc2\xa0 \xe7\x99\xbd\xe7\x81\xb5\xc2\xa0 \xe4\xb9\x94\xe7\xba\xb3\xe6\xa3\xae\xc2\xb7\xe5\x88\xa9\xe6\x99\xae\xe5\xb0\xbc\xe5\x9f\xba\xc2\xa0 \xe7\x90\x86\xe6\x9f\xa5\xe5\xbe\xb7\xc2\xb7\xe5\x9d\x8e\xe5\xbe\xb7\xc2\xa0 \xe8\xb4\x9d\xe4\xb8\x9d\xc2\xb7\xe6\xa0\xbc\xe5\x85\xb0\xe7\x89\xb9\xc2\xa0\xc2\xa0', 'pubdated': '2018-05-04(\xe7\xbe\x8e\xe5\x9b\xbd)', 'score': '\xe6\x9a\x82\xe6\x97\xa0\xe8\xaf\x84\xe5\x88\x86', 'ctype': '\xe5\x89\xa7\xe6\x83\x85 \xe5\x96\x9c\xe5\x89\xa7 \xe7\x88\xb1\xe6\x83\x85\xc2\xa0', 'downloadurl': 'magnet:?xt=urn:btih:262U3KJBH2MYNXISI5UYIZYHFX3NCHVM\r|btbo://1740d00f2c60c813638fb0aaddc37fcc/\xe5\xae\x89\xe5\xa4\x9a\xe5\xbc\x97BD\xe4\xb8\xad\xe8\x8b\xb1\xe5\x8f\x8c\xe5\xad\x97[\xe9\xa3\x98\xe8\x8a\xb1www.piaohua.com].mp4|', 'imdburl': 'http://www.imdb.com/title/tt5605076', 'director': 'Scott Perlman', 'officalsite': '', 'name': '\xe5\xae\x89\xe5\xa4\x9a\xe5\xbc\x97 Andover', 'language': '\xe8\x8b\xb1\xe8\xaf\xad', 'url': 'https://www.piaohua.com/html/xiju/2018/0930/41670.html', 'country': '\xe7\xbe\x8e\xe5\x9b\xbd', 'age': '2018'}
mobj = re.search(r"lianxujud|piaod","http://www.piao/lianxuju/s.html")
new_full_url = urlparse.urljoin("http://piaohua/kehuan/index.html","list_3.html")
st = "https://www.piaohua.com/html/xiju/2018/1008/41698.html";
s = re.search(r'html\/([a-z]+)',st)
print s.group(1)
exit()
for x in zidian2.values():
    if isinstance(x,unicode):
        print x.encode("utf-8")


    #if(chaType['encoding']=="ascii"):
    #    #print x.decode('ascii').encode("utf-8")
    #print chaType
    #h = HTMLParser.HTMLParser()
    #str ="|btbo://1740d00f2c60c813638fb0aaddc37fcc/安多弗BD中英双字[飘花www.piaohua.com].mp4|')"
    #str = re.sub(r"'","\\\'",str)
    #print str